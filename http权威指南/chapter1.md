
# HTTP概述

## 资源

## 媒体类型：MIME
## URI（统一资源标识符）：包含URL和URN
URL标准格式：
1. 第一部分成为方案（schema），说明了访问资源所使用的协议类型。eg:http://。
2. 第二部分为服务器网址。eg:www.baidu.com。
3. 其余部分指定Web服务器的某个资源
## URN
统一资源名。与资源位置无关，可以将资源四处搬移，无论出于何处，对于因特网标准文档RFC 2141都可以用URN:ietf:rcf:2141来命名--需要一个支撑架构来解析资源的位置
## 事务
事务由一个请求和一个响应结果组成
1. 方法
HTTP方法：
GET（从服务器向客户端发送命名资源）
PUT（将来自客户端的数据存储到一个命名服务器资源中去）
DELETE（从服务器中删除命名资源）
POST（将客户端数据发送到一个服务器网关应用程序）
HEAD（仅发送命名资源响应中的HTTP首部）

2. 状态码
200（OK，文档返回正确）
302（重定向）
404（NOT FOUND）

## 报文

起始行：请求报文中用来说明要做些说明，响应报文中说明出现了什么情况
首部字段：Accept:text/*  之类
主体：请求主体中包含了所有要发送给web服务器的数据，响应主体中装载了要返回给客户端的数据。


## 连接
HTTP是应用层的协议，无需关心网络通信的具体细节

1. TCP/IP：
TCP提供了
无差错的数据传输
按序传输
未分段的数据流

2. 连接、IP地址及端口号
连接步骤：
a）浏览器从URL中解析出服务器主机名
b）浏览器将服务器的主机名转换成服务器的IP地址
c）浏览器将端口号（如果有的话）从URL中解析出来
d）浏览器建立一条与Web服务器的TCP连接
e）浏览器向服务器发送一条HTTP请求报文
f）服务器向浏览器回送一条HTTP响应报文
g）关闭连接，浏览器显示文档

3. 使用Telnet
a）首先查找url的ip，打开一条到那台机器端口80的TCP连接。
b）一旦打开TCP连接，就要求输入HTTP请求
c）请求结束（由一个空行表示）之后，服务器会打开一条HTTP响应中将内容回送并关闭连接
也可使用nc(netcat)

## 协议版本

1. HTTP/0.9
有设计缺陷，不支持MIME、各种HTTP首部，或者版本号

2. HTTP/1.0
添加了版本号、各种HTTP首部、一些额外的方法、

3. HTTP/1.0+
包含了keep-alive连接、虚拟主机的支持、以及代理连接的支持（非官方）

4. HTTP/1.1 
重点校正HTTP设计中的结构性缺陷，明确语义，引入重要的性能措施，并删除一些不好的特性

5. HTTP-NG(HTTP/2.0) 
重点关注的是性能的大幅优化，以及更强大的服务逻辑远程执行框架。


## Web的结构组件

1. 代理
接受所有客户端HTTP请求，并转发给服务器（可能会对请求进行修改后转发）

2. 缓存
Web缓存（web cache）或者代理缓存（proxy cache）；特殊的HTTP代理服务器，可以将经过代理传送的常用文档复制保存起来，下一个请求同一文档的客户端可以享受缓存的私有副本

3. 网关（gateway）
作为其他服务器的中间实体，通常用于将HTTP流量转换成其他协议

4. 隧道（tunnel）
隧道时建立起来之后就会在两条连接之间对原始数据进行盲目转发的HTTP应用程序；常见的用途时HTTP连接承载加密的安全套接字层（SSL）流量，这样SSL流量就可以穿过只允许Web流量通过的防火墙；
客户端=>SSL=>隧道起点=>SSL(HTTP)=>HTTP连接=>(HTTP)SSL=>（80端口）隧道终点=>SSL=>SSL连接=>SSL=>（端口443）服务器
5. Agent代理
用户agent代理时代表用户发起HTTP请求的客户端程序（web浏览器）
