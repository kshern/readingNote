

# HTTP报文

1. 报文是如何流动的
2. HTTP报文的三个组成部分（起始行、首部和实体的主体部分）
3. 请求和响应报文之间的区别
4. 请求报文支持的各种功能（方法）
5. 和响应报文一起返回的各种状态码
6. 各种各样的HTTP首部都是用来做什么的

## 报文流

HTTP报文是在HTTP应用程序之间发送的数据块，这些数据块以元信息（meta-information）开头

1. 报文流入源端服务器
HTTP使用术语流入（inbound） 和流出（outbound）来描述事务处理（transaction）的方向，报文流入源端服务器，工作完成之后，会流回用户的Agent代理中。
2. 报文向下游流动
所有报文都会向下游（downstream）流动。所有报文的发送者都在接收者的上游（upstream）。

## 报文的组成部分

HTTP报文是简单的格式化数据。
报文由三个部分组成：
1. 起始行(start line)：对报文进行描述
2. 首部(header)：包含属性
3. 主体(body)：包含数据
起始行和首部是由行分隔的ASCII文本。每行都以一个由两个字符组成的行终止序列作为结束，其中包含一个回车符（ASCII码13）和一个换行符（ASCII码10）。
主体是一个可选的数据块。主体和起始行和首部区别是，主体中可以包含文本和二进制数据，也可以为空。


##  报文的语法
所有HTTP报文都可以分为两类：请求报文（request message）和响应报文（response message）。
请求报文：

```
<method><request-URL><version>
<headers>

<entity-body>
```
响应报文：

```
<version><status><reason-phrase>
<headers>

<entity-body>
```

报文各部分描述：

1. 方法(method)：客户端希望服务器对资源执行的动作。单独的词:GET,HEAD,POST
1. 请求URL(request-URL)：命名了所请求的资源，或者URL路径组成的完成完整URL
1. 版本(version)：报文所使用的HTTP版本，格式为：
    ```
    HTTP/<major>.<minor>
    ```
    其中主要版本号(major)和次要版本号(minor)都是整数。
1. 状态码(status-code)：这三位数字描述了请求过程中所发生的情况。
1. 原因短语(reason-phrase)：数字状态码的可读版本，包含行终止序列之前的所有文本。
1. 首部(header)：可以由零个或多个首部，每个首部都包含一个名字，后面跟着一个冒号（：），然后是一个可选的空格，接着是一个值，最后是一个CRLF。
1. 实体的主体部分（entity-body）：实体的主体部分包含一个由任意数据组成的数据块

## 起始行

1. 请求行：请求报文请求服务器对资源进行一些操作
1. 响应行：响应报文承载了状态信息和操作产生的所有结果数据，将其返回给客户端
1. 方法：请求的起始行以方法作为开始，方法用来告知服务器做些什么（GET,POST）
    GET：从服务器获取一份文档
    HEAD：只从服务器获取文档的首部
    POST：向服务器发送需要处理的数据
    PUT：将请求的主体部分存储到服务器上
    TRACE：对可能经过代理服务器传送到服务器上去的报文经行追踪
    OPTIONS: 决定可以在服务器上执行哪些方法
    DELETE：从服务器上删除一份文档

1. 状态码：方法是用来告诉服务器做什么事情的，状态码则是用来告诉客户端，发生了什么事情，状态码位于响应的起始行中。
    200-299：请求成功
    300-399：资源已被移走
    400-499：客户端请求出错了
    500-599：服务器出错了

